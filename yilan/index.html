<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Neon Yılan</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #050505;
      color: white;
      font-family: 'Courier New', Courier, monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      overflow: hidden;
      touch-action: none;
    }
    h1 { margin: 10px 0; text-shadow: 0 0 10px #00ff00; font-size: 2rem; }
    #oyunAlani { background-color: #000; border: 2px solid #333; box-shadow: 0 0 20px rgba(0, 255, 0, 0.2); display: block; }
    .bilgi { margin-top: 10px; font-size: 1.2rem; color: #ccc; }
    #bitisEkrani { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.9); border: 2px solid #00ff00; padding: 30px; text-align: center; display: none; box-shadow: 0 0 50px rgba(0, 255, 0, 0.5); border-radius: 10px; }
    button { background: #00ff00; color: black; border: none; padding: 10px 20px; font-size: 1.2rem; font-weight: bold; cursor: pointer; margin-top: 20px; border-radius: 5px; }
  </style>
</head>
<body>
<h1>NEON YILAN</h1>
<canvas id="oyunAlani" width="360" height="360"></canvas>
<div class="bilgi">SKOR: <span id="skor">0</span></div>
<div id="bitisEkrani">
  <h2 style="color: #ff0055;">OYUN BİTTİ</h2>
  <p>Skorun: <span id="sonSkor">0</span></p>
  <button onclick="oyunuBaslat()">TEKRAR OYNA</button>
</div>
<script>
  const canvas = document.getElementById('oyunAlani');
  const ctx = canvas.getContext('2d');
  const skorText = document.getElementById('skor');
  const bitisEkrani = document.getElementById('bitisEkrani');
  const sonSkorText = document.getElementById('sonSkor');
  const kareBoyutu = 20;
  let hiz = 10; let skor = 0;
  let yilan = [{x: 10, y: 10}]; let yem = {x: 15, y: 15};
  let dx = 0; let dy = 0; let oyunDongusu;

  function oyunuBaslat() {
    yilan = [{x: 10, y: 10}]; skor = 0; dx = 1; dy = 0; hiz = 10;
    skorText.innerText = skor; bitisEkrani.style.display = 'none';
    rastgeleYem();
    if(oyunDongusu) clearInterval(oyunDongusu);
    oyunDongusu = setInterval(cizimYap, 1000 / hiz);
  }

  function cizimYap() {
    const kafa = {x: yilan[0].x + dx, y: yilan[0].y + dy};
    const karoSayisi = canvas.width / kareBoyutu;
    if (kafa.x < 0) kafa.x = karoSayisi - 1; if (kafa.x >= karoSayisi) kafa.x = 0;
    if (kafa.y < 0) kafa.y = karoSayisi - 1; if (kafa.y >= karoSayisi) kafa.y = 0;
    for (let i = 0; i < yilan.length; i++) { if (kafa.x === yilan[i].x && kafa.y === yilan[i].y) { oyunBitti(); return; } }
    yilan.unshift(kafa);
    if (kafa.x === yem.x && kafa.y === yem.y) {
      skor++; skorText.innerText = skor; rastgeleYem();
      if(skor % 5 === 0) { hiz++; clearInterval(oyunDongusu); oyunDongusu = setInterval(cizimYap, 1000 / hiz); }
    } else { yilan.pop(); }

    ctx.fillStyle = 'black'; ctx.fillRect(0, 0, canvas.width, canvas.height);
    yilan.forEach((parca, index) => {
      ctx.fillStyle = index === 0 ? '#00ff00' : '#008f00';
      ctx.shadowBlur = 15; ctx.shadowColor = "#00ff00";
      ctx.fillRect(parca.x * kareBoyutu, parca.y * kareBoyutu, kareBoyutu - 2, kareBoyutu - 2);
      ctx.shadowBlur = 0;
    });
    ctx.fillStyle = '#ff0055'; ctx.shadowBlur = 20; ctx.shadowColor = "#ff0055";
    ctx.beginPath(); ctx.arc(yem.x * kareBoyutu + kareBoyutu/2, yem.y * kareBoyutu + kareBoyutu/2, kareBoyutu/2 - 2, 0, Math.PI*2); ctx.fill(); ctx.shadowBlur = 0;
  }

  function rastgeleYem() {
    const karoSayisi = canvas.width / kareBoyutu;
    yem = { x: Math.floor(Math.random() * karoSayisi), y: Math.floor(Math.random() * karoSayisi) };
  }
  function oyunBitti() { clearInterval(oyunDongusu); sonSkorText.innerText = skor; bitisEkrani.style.display = 'block'; }

  document.addEventListener('keydown', changeDirection);
  function changeDirection(event) {
    const L=37, R=39, U=38, D=40;
    if (event.keyCode === L && dx !== 1) { dx = -1; dy = 0; }
    if (event.keyCode === U && dy !== 1) { dx = 0; dy = -1; }
    if (event.keyCode === R && dx !== -1) { dx = 1; dy = 0; }
    if (event.keyCode === D && dy !== -1) { dx = 0; dy = 1; }
  }
  let tX = 0; let tY = 0;
  document.addEventListener('touchstart', e => { tX = e.changedTouches[0].screenX; tY = e.changedTouches[0].screenY; }, false);
  document.addEventListener('touchend', e => {
    let eX = e.changedTouches[0].screenX; let eY = e.changedTouches[0].screenY;
    let xD = eX - tX; let yD = eY - tY;
    if (Math.abs(xD) > Math.abs(yD)) { if (xD > 0 && dx !== -1) { dx = 1; dy = 0; } else if (xD < 0 && dx !== 1) { dx = -1; dy = 0; } }
    else { if (yD > 0 && dy !== -1) { dx = 0; dy = 1; } else if (yD < 0 && dy !== 1) { dx = 0; dy = -1; } }
  }, false);
  oyunuBaslat();
</script>
</body>
</html>