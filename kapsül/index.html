<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zaman KapsÃ¼lÃ¼</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { background: #050810; color: #00f3ff; font-family: 'Orbitron', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
    .kutu { width: 90%; max-width: 500px; border: 2px solid #00f3ff; padding: 30px; border-radius: 15px; text-align: center; background: rgba(5,8,16,0.9); box-shadow: 0 0 30px rgba(0,243,255,0.2); }
    textarea { width: 100%; height: 100px; background: #0a1020; border: 1px solid #00f3ff; color: white; padding: 10px; margin: 20px 0; }
    button, select { background: #00f3ff; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; margin: 5px; }
    #kilitli, #acik { display: none; }
    #sayac { font-size: 30px; color: #ff0055; margin: 20px 0; text-shadow: 0 0 10px red; }
    .bilgi-notu { font-size: 10px; color: #888; margin-top: 5px; }
  </style>
</head>
<body>
<div class="kutu">
  <h1>ZAMAN KAPSÃœLÃœ</h1>
  <div id="giris">
    <p>GeleceÄŸe bir not bÄ±rak.</p>
    <textarea id="msg" placeholder="Gelecekteki kendine veya arkadaÅŸlarÄ±na bir mesaj yaz..."></textarea>

    <select id="sure">
      <option value="10">10 Saniye (Test)</option>
      <option value="3600">1 Saat</option>
      <option value="86400">24 Saat</option>
      <option value="604800">1 Hafta</option>
      <option value="2592000">1 Ay</option>
      <option value="31536000">1 YÄ±l (Cesaretin var mÄ±?)</option>
    </select>

    <button onclick="kilitle()">ðŸ”’ KÄ°LÄ°TLE</button>
  </div>

  <div id="kilitli">
    <h1>ðŸ”’ KÄ°LÄ°TLENDÄ°</h1>
    <div id="sayac">00:00:00:00</div> <p>SÃ¼re dolana kadar aÃ§Ä±lamaz.</p>
    <p class="bilgi-notu">Bu siteyi kapatsan bile sayaÃ§ iÅŸlemeye devam eder.</p>
    <button onclick="sifirla()" style="background:#333;color:#fff;font-size:10px;margin-top:20px;">RESET (Acil Durum)</button>
  </div>

  <div id="acik">
    <h2>ðŸ”“ KAPSÃœL AÃ‡ILDI</h2>
    <p id="gizliMsg" style="color:white; font-family:monospace; white-space: pre-wrap; border: 1px dashed #00f3ff; padding: 15px;"></p>
    <button onclick="sifirla()">YENÄ° KAPSÃœL</button>
  </div>
</div>

<script>
  const giris=document.getElementById('giris'), kilitli=document.getElementById('kilitli'), acik=document.getElementById('acik'), sayacEl=document.getElementById('sayac');
  let interval;

  function baslat() {
    const hedef = localStorage.getItem('kapsul_zaman');
    const mesaj = localStorage.getItem('kapsul_mesaj');
    if(hedef && mesaj) kontrol(parseInt(hedef), mesaj);
  }

  function kilitle() {
    const m = document.getElementById('msg').value;
    if(!m) return alert('Mesaj yazmadan kilitleyemezsin!');

    // Åžimdiki zaman + SeÃ§ilen saniye
    const hedef = Math.floor(Date.now()/1000) + parseInt(document.getElementById('sure').value);

    localStorage.setItem('kapsul_mesaj', m);
    localStorage.setItem('kapsul_zaman', hedef);
    kontrol(hedef, m);
  }

  function kontrol(hedef, mesaj) {
    const simdi = Math.floor(Date.now()/1000);
    if(hedef > simdi) {
      // Kilit EkranÄ±nÄ± GÃ¶ster
      giris.style.display='none'; acik.style.display='none'; kilitli.style.display='block';

      if(interval) clearInterval(interval);

      // SayacÄ± BaÅŸlat
      interval = setInterval(() => {
        const k = hedef - Math.floor(Date.now()/1000);
        if(k <= 0) {
          clearInterval(interval);
          ac(mesaj);
        } else {
          // GÃ¼n, Saat, Dakika, Saniye hesapla
          const d=Math.floor(k/86400);
          const h=Math.floor((k%86400)/3600);
          const m=Math.floor((k%3600)/60);
          const s=k%60;

          // Ekrana yazdÄ±r (GÃ¼n varsa gÃ¶ster)
          let text = `${h<10?'0'+h:h}:${m<10?'0'+m:m}:${s<10?'0'+s:s}`;
          if(d > 0) text = `${d} GÃ¼n ` + text;

          sayacEl.innerText = text;
        }
      }, 1000);
    } else {
      ac(mesaj);
    }
  }

  function ac(m) {
    giris.style.display='none';
    kilitli.style.display='none';
    acik.style.display='block';
    document.getElementById('gizliMsg').innerText = m;
  }

  function sifirla() {
    if(confirm("KapsÃ¼lÃ¼ sÄ±fÄ±rlamak Ã¼zeresin. Mesaj silinecek. Emin misin?")) {
      localStorage.removeItem('kapsul_mesaj');
      localStorage.removeItem('kapsul_zaman');
      location.reload();
    }
  }

  baslat();
</script>
</body>
</html>